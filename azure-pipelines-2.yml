trigger:
  branches:
    include:
      - master

pool:
  Default

jobs:
  - deployment: build_go_app
    environment: 'golang.go'
    strategy:
     runOnce:
       deploy:
         steps:
           - script: |
               hostname
               go mod init webserver.go
               go mod tidy
               go build

  - deployment: publish
    environment: 'golang.go'
    dependsOn: build_go_app
    strategy:
     runOnce:
       deploy:
         steps:
           - publish: pwd
             artifact: 'WebApp'